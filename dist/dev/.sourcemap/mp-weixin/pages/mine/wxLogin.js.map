{"version":3,"sources":["webpack:///./src/main.js","webpack:///./src/pages/mine/wxLogin.vue?0a03","webpack:///./src/pages/mine/wxLogin.vue?e04f","webpack:///./src/pages/mine/wxLogin.vue?bcc0","webpack:///./src/pages/mine/wxLogin.vue?47b0","webpack:///./src/pages/mine/wxLogin.vue","webpack:///./src/pages/mine/wxLogin.vue?d672","webpack:///./src/pages/mine/wxLogin.vue?1369"],"names":["createPage","Page","data","phone","computed","isLogin","state","user","unionId","openId","sessionKey","wxUser","onLoad","option","methods","wxsmall","getUnionId","getWxUserInfo","aliUserInfo","cancel","uni","navigateBack","getUserState","getUser","e","that","console","log","detail","userInfo","$store","commit","then","code","dataInfo","session_key","info","onGetAuthorize","my","getAuthCode","scopes","success","res","authCode","getOpenUserInfo","fail","JSON","parse","response","setStorage","key","stringify","onAuthError"],"mappings":"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","file":"pages/mine/wxLogin.js","sourcesContent":["import 'uni-pages';\n\nimport Vue from 'vue'            \nimport Page from './pages/mine/wxLogin.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./wxLogin.vue?vue&type=template&id=09da5bd0&scoped=true&\"\nimport script from \"./wxLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./wxLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wxLogin.vue?vue&type=style&index=0&id=09da5bd0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09da5bd0\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/lonelycity/ldy/uni-app/my-uni/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('09da5bd0')) {\n      api.createRecord('09da5bd0', component.options)\n    } else {\n      api.reload('09da5bd0', component.options)\n    }\n    module.hot.accept(\"./wxLogin.vue?vue&type=template&id=09da5bd0&scoped=true&\", function () {\n      api.rerender('09da5bd0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/mine/wxLogin.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=template&id=09da5bd0&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  mapState,\n  mapActions\n} from 'vuex'\nexport default {\n  data() {\n    return {\n      phone: null\n    }\n  },\n  computed: {\n    ...mapState({\n      isLogin: state => state.user.isLogin,\n      unionId: state => state.user.unionId,\n      openId: state => state.user.openId,\n      sessionKey: state => state.user.sessionKey,\n      wxUser: state => state.user.wxUser,\n\n    })\n  },\n  onLoad(option) {\n\n\n\n\n\n\n\n\n\n\n\n  },\n  methods: {\n    ...mapActions({\n      wxsmall: 'user/wxsmall',\n      getUnionId: 'user/getUnionId',\n      getWxUserInfo: 'user/getWxUserInfo',\n      aliUserInfo: 'user/aliUserInfo',\n    }),\n    cancel() {\n      // 取消授权\n      uni.navigateBack()\n    },\n    getUserState() {\n\n    },\n    getUser(e) {\n      var that = this;\n      console.log(\"是否进入授权\");\n      // 小程序同意授权\n      if (e.detail.userInfo) {\n        this.$store.commit('user/setwxUser', e.detail.userInfo)\n        if (!this.openId) {\n          this.wxsmall().then((data) => {\n            if (data.code == '1') {\n              this.getWxUserInfo({\n                sessionKey: data.dataInfo.session_key\n              }).then((info) => {\n                console.log(\"获取微信信息\", this.wxUser);\n              });\n            }\n          })\n        } else {\n          this.getUserState()\n        }\n      } else {\n\n      }\n    },\n    // 支付宝授权逻辑\n    onGetAuthorize(e) {\n      let that = this;\n      my.getAuthCode({\n        scopes: 'auth_user', //auth_base auth_user\n        success: (res) => {\n          let { authCode: code } = res;\n          this.aliUserInfo({ code: code }).then((data) => {\n            console.log(\"获取结果\", data);\n          });\n        },\n      });\n\n      my.getOpenUserInfo({\n        fail: (res) => {\n          console.log(\"支付宝用户信息获取失败\");\n        },\n        success: (res) => {\n          let userInfo = JSON.parse(res.response).response // 以下方的报文格式解析两层 response\n          console.log(\"支付宝用户信息\", userInfo);\n          uni.setStorage({\n            key: 'userInfo',\n            data: JSON.stringify(userInfo)\n          });\n        }\n      });\n    },\n    onAuthError() {\n      console.log(\"报错\");\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=style&index=0&id=09da5bd0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=style&index=0&id=09da5bd0&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1568360045940\n      var cssReload = require(\"/Users/lonelycity/ldy/uni-app/my-uni/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}